{"ast":null,"code":"// import React, { useState, useEffect } from \"react\";\n// import 'bootstrap/dist/css/bootstrap.min.css';\n// import { Link, Routes, Route ,useNavigate } from \"react-router-dom\";\n// import LogoutButton from \"./logout/logout\";\n// import { useAuth } from \"./AuthContext\";\n// import StudentForm from \"./studentForm\";\n\n// const AdminDashboard = () => {\n//   const { token, email } = useAuth();\n//   const [adminInfo, setAdminInfo] = useState(null);\n//   const [isLoading, setIsLoading] = useState(true);\n//   const [selectedPhoto, setSelectedPhoto] = useState(null);\n//   const [uploadingPhoto, setUploadingPhoto] = useState(false);\n\n//   const navigate = useNavigate();\n\n//   const { isAdmin } = useAuth();\n\n//   useEffect(() => {\n//     const fetchAdminInfo = async () => {\n//       try {\n//         if (token && isAdmin && email) {\n//           const response = await fetch(`http://localhost:9002/data?email=${email}`, {\n//             headers: {\n//               Authorization: `Bearer ${token}`,\n//             },\n//           });\n\n//           if (response.status === 200) {\n//             const adminData = await response.json();\n//             setAdminInfo(adminData);\n//             setSelectedPhoto(adminData.photo);\n//           }\n\n//           setIsLoading(false);\n//         } else {\n//           console.error('Failed to fetch admin information');\n//         }\n//       } catch (error) {\n//         console.error('Fetch admin info error:', error);\n//       }\n//     };\n\n//     if (token && isAdmin && email) {\n//       fetchAdminInfo();\n//     }\n//   }, [token, isAdmin, email, navigate]);\n\n//   const handlePhotoUpload = async (e) => {\n//     e.preventDefault();\n//     console.log('Uploading photo...');\n\n//     const formData = new FormData();\n//     formData.append('photo', e.target.files[0]);\n//     formData.append('email', email);\n\n//     setUploadingPhoto(true);\n\n//     try {\n//       const response = await fetch(`http://localhost:9002/data/uploadAdminPhoto`, {\n//         method: \"POST\",\n//         body: formData,  \n//       });\n\n//       if (response.status === 200) {\n//         const adminData = await response.json();\n//         setSelectedPhoto(adminData.photo);\n//       } else {\n//         console.error(\"Photo upload failed\");\n//       }\n//     } catch (error) {\n//       console.error(\"Photo upload error:\", error);\n//     } finally {\n//       setUploadingPhoto(false);\n//     }\n//   };\n\n//   const saveStudentInfo = async (studentData) => {\n//     try {\n//       const response = await fetch('http://localhost:9002/data/saveStudentInfo', {\n//         method: 'POST',\n//         headers: {\n//           'Content-Type': 'application/json',\n//           Authorization: `Bearer ${token}`,\n//         },\n//         body: JSON.stringify(studentData),\n//       });\n//       if (response.status === 200) {\n//         // Handle successful save if needed\n//         console.log('Student information saved successfully');\n//       } else {\n//         // Handle save failure\n//         console.error('Failed to save student information');\n//       }\n//     } catch (error) {\n//       console.error('Save student info error:', error);\n//     }\n//   };\n\n//   return (\n//     <div className=\"container-fluid\">\n//       <div className=\"row\">\n//         <nav id=\"sidebar\" className=\"col-md-3 col-lg-2 d-md-block bg-light sidebar\">\n//           <div className=\"position-sticky\">\n//             <ul className=\"nav flex-column\">\n//               <li className=\"nav-item\">\n//                 <Link to=\"/admindashboard/ChatSystem\" className=\"nav-link\">\n//                   Chat System\n//                 </Link>\n//               </li>\n//               <li className=\"nav-item\">\n//                 <Link to=\"/admindashboard/form\" className=\"nav-link\">\n//                   Form\n//                 </Link>\n//               </li>\n//             </ul>\n//           </div>\n//         </nav>\n\n//         <main className=\"col-md-9 ms-sm-auto col-lg-10 px-md-4\">\n//           <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\n//             <h1 className=\"h2\">Admin Dashboard</h1>\n//             <LogoutButton />\n//           </div>\n\n//           {isLoading ? (\n//             <p>Loading admin data...</p>\n//           ) : (\n//             <div>\n//              <div>\n//   {isAdmin && (\n//     <div>\n//       <input type=\"file\" id=\"fileInput\" onChange={handlePhotoUpload} />\n//       {uploadingPhoto && <p>Uploading photo...</p>}\n\n//     </div>\n//   )}\n//   {selectedPhoto !== null && (\n//     <div>\n//       <img\n//         src={`data:image/jpeg;base64,${selectedPhoto}`}\n\n//         style={{ maxWidth: '200px', borderRadius: '50%' }}\n//       />\n//     </div>\n//   )}\n// </div>\n\n//               <div className=\"mt-4\">\n//                 {adminInfo ? ( // Check if adminInfo is not null\n//                   <>\n//                     <p><strong>Name:</strong> {adminInfo.name}</p>\n//                     <p><strong>Email:</strong> {adminInfo.email}</p>\n//                     <p><strong>Admin Id:</strong> {adminInfo.adminId}</p>\n//                     <p><strong>Faculty:</strong> {adminInfo.faculty}</p>\n//                   </>\n//                 ) : (\n//                   <p>Admin information not available.</p>\n//                 )}\n//               </div>\n//               <div>\n//               <StudentForm onSave={saveStudentInfo} />\n//             </div>\n//           </div>\n\n//             </div>\n//           ) \n//           <Routes>\n//           <Route path=\"/admindashboard/form\" element={<StudentForm />} />\n//           </Routes>\n//         </main>\n//       </div>\n//     </div>\n//   );\n\n// export default AdminDashboard;","map":{"version":3,"names":[],"sources":["C:/Users/Dell/OneDrive/Desktop/sem5/Project/New/new/src/components/adminDashboard.js"],"sourcesContent":["// import React, { useState, useEffect } from \"react\";\r\n// import 'bootstrap/dist/css/bootstrap.min.css';\r\n// import { Link, Routes, Route ,useNavigate } from \"react-router-dom\";\r\n// import LogoutButton from \"./logout/logout\";\r\n// import { useAuth } from \"./AuthContext\";\r\n// import StudentForm from \"./studentForm\";\r\n\r\n// const AdminDashboard = () => {\r\n//   const { token, email } = useAuth();\r\n//   const [adminInfo, setAdminInfo] = useState(null);\r\n//   const [isLoading, setIsLoading] = useState(true);\r\n//   const [selectedPhoto, setSelectedPhoto] = useState(null);\r\n//   const [uploadingPhoto, setUploadingPhoto] = useState(false);\r\n\r\n//   const navigate = useNavigate();\r\n\r\n//   const { isAdmin } = useAuth();\r\n\r\n \r\n\r\n//   useEffect(() => {\r\n//     const fetchAdminInfo = async () => {\r\n//       try {\r\n//         if (token && isAdmin && email) {\r\n//           const response = await fetch(`http://localhost:9002/data?email=${email}`, {\r\n//             headers: {\r\n//               Authorization: `Bearer ${token}`,\r\n//             },\r\n//           });\r\n\r\n//           if (response.status === 200) {\r\n//             const adminData = await response.json();\r\n//             setAdminInfo(adminData);\r\n//             setSelectedPhoto(adminData.photo);\r\n//           }\r\n\r\n//           setIsLoading(false);\r\n//         } else {\r\n//           console.error('Failed to fetch admin information');\r\n//         }\r\n//       } catch (error) {\r\n//         console.error('Fetch admin info error:', error);\r\n//       }\r\n//     };\r\n\r\n//     if (token && isAdmin && email) {\r\n//       fetchAdminInfo();\r\n//     }\r\n//   }, [token, isAdmin, email, navigate]);\r\n\r\n\r\n//   const handlePhotoUpload = async (e) => {\r\n//     e.preventDefault();\r\n//     console.log('Uploading photo...');\r\n  \r\n//     const formData = new FormData();\r\n//     formData.append('photo', e.target.files[0]);\r\n//     formData.append('email', email);\r\n  \r\n//     setUploadingPhoto(true);\r\n  \r\n//     try {\r\n//       const response = await fetch(`http://localhost:9002/data/uploadAdminPhoto`, {\r\n//         method: \"POST\",\r\n//         body: formData,  \r\n//       });\r\n  \r\n//       if (response.status === 200) {\r\n//         const adminData = await response.json();\r\n//         setSelectedPhoto(adminData.photo);\r\n//       } else {\r\n//         console.error(\"Photo upload failed\");\r\n//       }\r\n//     } catch (error) {\r\n//       console.error(\"Photo upload error:\", error);\r\n//     } finally {\r\n//       setUploadingPhoto(false);\r\n//     }\r\n//   };\r\n  \r\n//   const saveStudentInfo = async (studentData) => {\r\n//     try {\r\n//       const response = await fetch('http://localhost:9002/data/saveStudentInfo', {\r\n//         method: 'POST',\r\n//         headers: {\r\n//           'Content-Type': 'application/json',\r\n//           Authorization: `Bearer ${token}`,\r\n//         },\r\n//         body: JSON.stringify(studentData),\r\n//       });\r\n//       if (response.status === 200) {\r\n//         // Handle successful save if needed\r\n//         console.log('Student information saved successfully');\r\n//       } else {\r\n//         // Handle save failure\r\n//         console.error('Failed to save student information');\r\n//       }\r\n//     } catch (error) {\r\n//       console.error('Save student info error:', error);\r\n//     }\r\n//   };\r\n\r\n   \r\n\r\n//   return (\r\n//     <div className=\"container-fluid\">\r\n//       <div className=\"row\">\r\n//         <nav id=\"sidebar\" className=\"col-md-3 col-lg-2 d-md-block bg-light sidebar\">\r\n//           <div className=\"position-sticky\">\r\n//             <ul className=\"nav flex-column\">\r\n//               <li className=\"nav-item\">\r\n//                 <Link to=\"/admindashboard/ChatSystem\" className=\"nav-link\">\r\n//                   Chat System\r\n//                 </Link>\r\n//               </li>\r\n//               <li className=\"nav-item\">\r\n//                 <Link to=\"/admindashboard/form\" className=\"nav-link\">\r\n//                   Form\r\n//                 </Link>\r\n//               </li>\r\n//             </ul>\r\n//           </div>\r\n//         </nav>\r\n\r\n//         <main className=\"col-md-9 ms-sm-auto col-lg-10 px-md-4\">\r\n//           <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n//             <h1 className=\"h2\">Admin Dashboard</h1>\r\n//             <LogoutButton />\r\n//           </div>\r\n\r\n//           {isLoading ? (\r\n//             <p>Loading admin data...</p>\r\n//           ) : (\r\n//             <div>\r\n//              <div>\r\n//   {isAdmin && (\r\n//     <div>\r\n//       <input type=\"file\" id=\"fileInput\" onChange={handlePhotoUpload} />\r\n//       {uploadingPhoto && <p>Uploading photo...</p>}\r\n      \r\n//     </div>\r\n//   )}\r\n//   {selectedPhoto !== null && (\r\n//     <div>\r\n//       <img\r\n//         src={`data:image/jpeg;base64,${selectedPhoto}`}\r\n        \r\n//         style={{ maxWidth: '200px', borderRadius: '50%' }}\r\n//       />\r\n//     </div>\r\n//   )}\r\n// </div>\r\n\r\n//               <div className=\"mt-4\">\r\n//                 {adminInfo ? ( // Check if adminInfo is not null\r\n//                   <>\r\n//                     <p><strong>Name:</strong> {adminInfo.name}</p>\r\n//                     <p><strong>Email:</strong> {adminInfo.email}</p>\r\n//                     <p><strong>Admin Id:</strong> {adminInfo.adminId}</p>\r\n//                     <p><strong>Faculty:</strong> {adminInfo.faculty}</p>\r\n//                   </>\r\n//                 ) : (\r\n//                   <p>Admin information not available.</p>\r\n//                 )}\r\n//               </div>\r\n//               <div>\r\n//               <StudentForm onSave={saveStudentInfo} />\r\n//             </div>\r\n//           </div>\r\n          \r\n//             </div>\r\n//           ) \r\n//           <Routes>\r\n//           <Route path=\"/admindashboard/form\" element={<StudentForm />} />\r\n//           </Routes>\r\n//         </main>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n                \r\n\r\n// export default AdminDashboard;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA"},"metadata":{},"sourceType":"module","externalDependencies":[]}